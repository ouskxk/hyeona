<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>멍냥멍냥 | 웹 애플리케이션</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8fafc; /* bg-slate-50 */
        }
        .card {
            background-color: white;
            border-radius: 1rem; /* rounded-2xl */
            padding: 1.5rem; /* p-6 */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .btn-primary {
            background-color: #22c55e; /* bg-green-500 */
            color: white;
            font-weight: 700; /* font-bold */
            padding: 0.5rem 1rem;
            border-radius: 0.5rem; /* rounded-lg */
            transition: background-color 0.2s;
        }
        .btn-primary:hover {
            background-color: #16a34a; /* bg-green-600 */
        }
        .btn-secondary {
            background-color: #1f2937; /* bg-gray-800 */
            color: white;
            font-weight: 700; /* font-bold */
            padding: 0.5rem 1rem;
            border-radius: 0.5rem; /* rounded-lg */
            transition: background-color 0.2s;
        }
        .btn-secondary:hover {
            background-color: #111827; /* bg-gray-900 */
        }
        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            max-width: 500px;
            width: 90%;
        }
        .nav-link.active {
            color: #16a34a; /* text-green-600 */
        }
    </style>
</head>
<body>
    <div id="app-container" class="max-w-7xl mx-auto p-8">
        <!-- 1. 헤더: 로고, 메뉴, 검색, 인증 -->
        <header class="flex justify-between items-center mb-10">
            <div class="flex items-center gap-3">
                <a href="#" data-page="dashboard" class="flex items-center gap-3">
                    <svg class="w-10 h-10 text-slate-800" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path d="M100,135 C80,150 50,145 40,120 C30,95 45,70 70,65 C95,60 105,75 100,95"/><path d="M100,135 C120,150 150,145 160,120 C170,95 155,70 130,65 C105,60 95,75 100,95"/><circle cx="55" cy="55" r="18"/><circle cx="90" cy="40" r="18"/><circle cx="110" cy="40" r="18"/><circle cx="145" cy="55" r="18"/></svg>
                    <h1 class="text-2xl font-bold text-slate-800">멍냥멍냥</h1>
                </a>
            </div>
            <div class="flex items-center gap-8">
                <nav id="main-nav" class="hidden md:flex items-center gap-6 text-md font-semibold text-slate-600">
                    <a href="#" class="nav-link hover:text-green-600" data-page="diet">식단</a>
                    <a href="#" class="nav-link hover:text-green-600" data-page="activity">활동</a>
                    <a href="#" class="nav-link hover:text-green-600" data-page="health">건강</a>
                    <a href="#" class="nav-link hover:text-green-600" data-page="calendar">캘린더</a>
                    <a href="#" class="nav-link hover:text-green-600" data-page="community">커뮤니티</a>
                </nav>
                <div class="flex items-center gap-4">
                    <div class="relative">
                        <input type="text" id="search-input" placeholder="검색..." class="w-48 pl-10 pr-4 py-2 border rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400 transition-all duration-300">
                        <svg class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg>
                    </div>
                    <div id="logged-out-view" class="flex items-center gap-2">
                        <button id="login-button" class="px-4 py-2 text-sm font-bold text-slate-700 hover:bg-slate-100 rounded-lg">로그인</button>
                        <button id="signup-button" class="btn-primary px-4 py-2 text-sm">회원가입</button>
                    </div>
                    <div id="logged-in-view" class="hidden relative">
                        <button id="profile-button" class="flex items-center gap-2">
                            <img src="https://placehold.co/32x32/a7f3d0/14532d?text=코" alt="User Avatar" class="w-8 h-8 rounded-full">
                            <span class="font-bold text-sm">코쪽이맘</span>
                        </button>
                        <div id="dropdown-menu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 py-1 z-10">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" data-page="profile">프로필 보기</a>
                            <a href="#" id="logout-button" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">로그아웃</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- 2. 본문: 동적으로 변경될 영역 -->
        <main id="main-content"></main>
    </div>

    <!-- 3. 팝업(모달)을 위한 컨테이너 -->
    <div id="modal-container"></div>

    <script>
        const mainContent = document.getElementById('main-content');
        const modalContainer = document.getElementById('modal-container');
        const appContainer = document.getElementById('app-container');
        
        // --- Application State ---
        let isAppleCalendarSynced = false;

        // --- Templates ---
        const templates = {
            dashboard: () => {
                const today = new Date();
                const year = today.getFullYear();
                const month = today.getMonth() + 1;
                const date = today.getDate();
                const day = today.getDay();
                const week = ['일', '월', '화', '수', '목', '금', '토'];
                const dayName = week[day];
                const formattedDate = `${year}년 ${month}월 ${date}일 ${dayName}요일`;

                return `
                    <div class="mb-8"><h2 class="text-3xl font-bold text-slate-800">오늘의 대시보드</h2><p class="text-slate-500 mt-1">${formattedDate}</p></div>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-2 space-y-8">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div class="card"><h3 class="font-bold text-lg mb-4 text-slate-700">오늘의 식단 기록</h3><div class="flex items-center gap-4"><div class="flex-1 space-y-2"><div class="w-full bg-gray-200 rounded-full h-2.5"><div class="bg-green-500 h-2.5 rounded-full" style="width: 83%"></div></div><p class="text-lg font-bold">500 <span class="text-sm font-normal text-slate-500">/ 600 Kcal</span></p></div><button class="btn-primary flex-shrink-0" data-modal="addMeal">식사 추가</button></div><p class="text-xs text-slate-500 mt-3">아침: 사료 1컵 | 저녁: 닭가슴살 50g</p></div>
                                <div class="card"><h3 class="font-bold text-lg mb-4 text-slate-700">스마트 활동량</h3><div class="flex items-center gap-4"><div class="flex-1"><p class="text-lg font-bold">30 <span class="text-sm font-normal text-slate-500">분 / 목표 45분</span></p><p class="text-sm font-semibold text-red-500">활동량이 적은편이에요.</p></div><button class="btn-primary flex-shrink-0" data-page="activity">산책 시작</button></div><p class="text-xs text-slate-500 mt-3">산책 1회 / 20분 | 실내놀이 1회 / 10분</p></div>
                            </div>
                            <div class="card"><h3 class="font-bold text-lg mb-4 text-slate-700">${year}년 ${month}월 캘린더</h3><div class="h-80 bg-slate-50 rounded-lg flex items-center justify-center text-slate-400 font-semibold border">Full Calendar UI Component</div></div>
                        </div>
                        <div class="lg:col-span-1 space-y-8">
                            <div class="card"><h3 class="font-bold text-lg mb-2 text-slate-700">건강 이상 징후 체크</h3><p class="text-sm text-slate-500 mb-4">반려동물의 상태를 체크해보세요.</p><div class="space-y-2 text-sm"><button class="w-full text-left p-2 rounded-lg hover:bg-slate-100">구토 / 설사</button><button class="w-full text-left p-2 rounded-lg hover:bg-slate-100">기력 저하 / 식욕 부진</button></div><button class="btn-secondary w-full mt-4" data-page="health">자세히 체크하기</button></div>
                            <div class="card"><h3 class="font-bold text-lg mb-4 text-slate-700">커뮤니티 최신 글</h3><div class="space-y-3"><a href="#" class="block p-2 rounded-lg hover:bg-slate-100"><p class="font-semibold text-sm truncate">강아지 수제 간식 레시피 공유해요!</p><p class="text-xs text-slate-500">작성자: 댕댕집사</p></a><a href="#" class="block p-2 rounded-lg hover:bg-slate-100"><p class="font-semibold text-sm truncate">고양이 화장실 모래 추천받아요 ㅠㅠ</p><p class="text-xs text-slate-500">작성자: 냥냥펀치</p></a></div><a href="#" class="text-sm font-bold text-green-600 hover:underline mt-4 block text-center" data-page="community">더 보기</a></div>
                        </div>
                    </div>
                `;
            },
            diet: `<!-- ... (previous detailed template) ... -->`,
            activity: `<!-- ... (previous detailed template) ... -->`,
            health: `<!-- ... (previous detailed template) ... -->`,
            calendar: () => {
                const today = new Date();
                const year = today.getFullYear();
                const month = today.getMonth() + 1;
                const syncButtonText = isAppleCalendarSynced ? '연동 해제' : 'Apple 캘린더 연동';
                const syncButtonClass = isAppleCalendarSynced ? 'bg-slate-200' : '';

                return `
                    <div class="mb-8 flex justify-between items-center">
                        <h2 class="text-3xl font-bold">${year}년 ${month}월 캘린더</h2>
                        <div class="flex items-center gap-4">
                            <button id="apple-cal-sync-btn" class="flex items-center gap-2 px-4 py-2 text-sm font-bold text-slate-700 hover:bg-slate-100 rounded-lg border ${syncButtonClass}">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 16 16"><path d="M8.28,3.284a1.88,1.88,0,0,0-1.336.56,1.883,1.883,0,0,0-.56,1.336,1.93,1.93,0,0,0,.048.4,1,1,0,0,0,.152.384A1.2,1.2,0,0,0,7.3,6.2a.545.545,0,0,0,.368.128.528.528,0,0,0,.368-.128,1.2,1.2,0,0,0,.712-.232,1,1,0,0,0,.152-.384,1.93,1.93,0,0,0,.048-.4,1.883,1.883,0,0,0-.56-1.336A1.88,1.88,0,0,0,8.28,3.284Zm2.08,8.2a1.866,1.866,0,0,1-1.2.4,2.049,2.049,0,0,1-1.44-.64,1,1,0,0,0-1.44,0,2.042,2.042,0,0,1-1.44.64,1.866,1.866,0,0,1-1.2-.4C2.336,10.2,2.056,6.312,3.672,4.6A4.322,4.322,0,0,1,7.2,3.1a4.44,4.44,0,0,1,2.16,0,4.322,4.322,0,0,1,3.528,1.5C14.536,6.312,14.256,10.2,12.728,11.484Z"/></svg>
                                ${syncButtonText}
                            </button>
                            <button class="btn-primary" data-modal="addEvent">일정 추가</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="h-[600px] bg-slate-50 rounded-lg flex flex-col items-center justify-center text-slate-400 font-semibold border">
                             <p>Full Calendar UI Component</p>
                            ${isAppleCalendarSynced ? '<p class="text-sm mt-2 text-green-600">Apple 캘린더와 연동되었습니다.</p>' : ''}
                        </div>
                    </div>
                `;
            },
            community: `<!-- ... (previous detailed template) ... -->`,
            profile: `<!-- ... (previous detailed template) ... -->`,
            searchResults: (query) => `<!-- ... (previous detailed template) ... -->`,
            
            signup: `<!-- ... (previous detailed template) ... -->`,
            addMeal: `<!-- ... (previous detailed template) ... -->`,
            addEvent: () => {
                const syncCheckboxDisabled = !isAppleCalendarSynced;
                return `
                    <div class="modal-overlay" data-modal-close>
                        <div class="modal-content">
                            <h2 class="text-2xl font-bold mb-4">새 일정 추가</h2>
                            <form class="space-y-4">
                                <input type="date" class="w-full p-2 border rounded">
                                <input type="text" placeholder="일정 제목 (예: 예방접종)" class="w-full p-2 border rounded">
                                <textarea placeholder="메모" class="w-full p-2 border rounded h-24"></textarea>
                                <label class="flex items-center gap-2 text-sm ${syncCheckboxDisabled ? 'text-gray-400 cursor-not-allowed' : ''}">
                                    <input type="checkbox" class="form-checkbox" ${syncCheckboxDisabled ? 'disabled' : ''}>
                                    <span>Apple 캘린더에도 추가</span>
                                </label>
                                <button type="submit" class="btn-primary w-full py-2">저장하기</button>
                            </form>
                        </div>
                    </div>
                `;
            },
        };

        // --- Core Functions ---
        function renderPage(pageName, params) {
            // Restore templates that were omitted for brevity
            templates.diet = templates.diet.startsWith('<!--') ? `
                <div class="mb-8"><h2 class="text-3xl font-bold">AI 식단 플래너</h2><p class="text-slate-500 mt-1">AI를 통해 맞춤 식단과 영양 정보를 확인하세요.</p></div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="card space-y-4"><h3 class="font-bold text-lg">1. 반려동물 정보 입력</h3><select class="w-full p-2 border rounded"><option>코코 (강아지)</option></select><input type="text" placeholder="현재 먹이는 사료/음식" class="w-full p-2 border rounded"><textarea placeholder="특별히 관리하고 싶은 건강 문제 (예: 피부, 관절)" class="w-full p-2 border rounded h-24"></textarea><button class="btn-primary w-full py-2">분석 받기</button></div>
                    <div class="card"><h3 class="font-bold text-lg">2. AI 분석 결과</h3><div class="space-y-4 mt-4 p-4 bg-slate-50 rounded-lg"><div class="font-semibold">결과가 여기에 표시됩니다.</div></div></div>
                </div>` : templates.diet;
            templates.activity = templates.activity.startsWith('<!--') ? `
                <div class="mb-8"><h2 class="text-3xl font-bold">활동 기록</h2><p class="text-slate-500 mt-1">오늘의 산책 경로와 주간 활동량을 확인하세요.</p></div>
                <div class="card mb-8"><div class="h-96 bg-slate-200 rounded-lg flex items-center justify-center text-slate-500">Map UI Component</div></div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div class="card"><p class="text-slate-500">오늘 산책 시간</p><p class="text-3xl font-bold">30분</p></div>
                    <div class="card"><p class="text-slate-500">오늘 이동 거리</p><p class="text-3xl font-bold">1.2 km</p></div>
                    <div class="card"><p class="text-slate-500">주간 평균</p><p class="text-3xl font-bold">25분</p></div>
                </div>` : templates.activity;
            templates.health = templates.health.startsWith('<!--') ? `
                <div class="mb-8 text-center"><h2 class="text-3xl font-bold">건강 이상 징후 체크</h2><p class="text-slate-500 mt-1">해당되는 증상을 모두 선택하면, AI가 의심되는 문제를 알려드립니다.</p></div>
                <div class="card max-w-4xl mx-auto"><div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <label class="flex items-center gap-2 p-3 border rounded-lg hover:bg-slate-100 cursor-pointer"><input type="checkbox" class="h-4 w-4"> 구토</label>
                    <label class="flex items-center gap-2 p-3 border rounded-lg hover:bg-slate-100 cursor-pointer"><input type="checkbox" class="h-4 w-4"> 설사</label>
                    <label class="flex items-center gap-2 p-3 border rounded-lg hover:bg-slate-100 cursor-pointer"><input type="checkbox" class="h-4 w-4"> 식욕 부진</label>
                    <label class="flex items-center gap-2 p-3 border rounded-lg hover:bg-slate-100 cursor-pointer"><input type="checkbox" class="h-4 w-4"> 기력 저하</label>
                    <label class="flex items-center gap-2 p-3 border rounded-lg hover:bg-slate-100 cursor-pointer"><input type="checkbox" class="h-4 w-4"> 기침</input></label>
                    <label class="flex items-center gap-2 p-3 border rounded-lg hover:bg-slate-100 cursor-pointer"><input type="checkbox" class="h-4 w-4"> 피부 발진</input></label>
                    <label class="flex items-center gap-2 p-3 border rounded-lg hover:bg-slate-100 cursor-pointer"><input type="checkbox" class="h-4 w-4"> 절뚝거림</input></label>
                    <label class="flex items-center gap-2 p-3 border rounded-lg hover:bg-slate-100 cursor-pointer"><input type="checkbox" class="h-4 w-4"> 소변 문제</input></label>
                </div><button class="btn-secondary w-full mt-6 py-2">분석 결과 보기</button></div>` : templates.health;
             templates.community = templates.community.startsWith('<!--') ? `
                <div class="mb-8 flex justify-between items-center"><h2 class="text-3xl font-bold">커뮤니티</h2><button class="btn-primary">글쓰기</button></div>
                <div class="flex gap-8">
                    <aside class="w-1/4 card"><h3 class="font-bold mb-4">카테고리</h3><ul class="space-y-2 text-sm"><li class="p-2 rounded bg-green-100 text-green-800 font-bold">전체 보기</li><li class="p-2 rounded hover:bg-slate-100">자유 게시판</li><li class="p-2 rounded hover:bg-slate-100">질문/답변</li><li class="p-2 rounded hover:bg-slate-100">사진/자랑</li></ul></aside>
                    <div class="w-3/4 card"><ul class="divide-y divide-slate-200"><li class="py-4"><h3 class="font-semibold hover:underline">강아지 수제 간식 레시피 공유해요!</h3><p class="text-sm text-slate-500 mt-1">댕댕집사 · 10분 전 · 댓글 5</p></li><li class="py-4"><h3 class="font-semibold hover:underline">고양이 화장실 모래 추천받아요 ㅠㅠ</h3><p class="text-sm text-slate-500 mt-1">냥냥펀치 · 1시간 전 · 댓글 12</p></li></ul></div>
                </div>` : templates.community;
             templates.profile = templates.profile.startsWith('<!--') ? `
                <div class="mb-8"><h2 class="text-3xl font-bold">프로필 관리</h2><p class="text-slate-500 mt-1">내 정보와 등록된 반려동물 정보를 관리하세요.</p></div>
                <div class="space-y-8">
                     <div class="card"><div class="flex justify-between items-start"><h3 class="font-bold text-lg">내 정보</h3><button class="text-sm font-bold text-slate-600 hover:underline">수정</button></div><div class="mt-4 space-y-2 text-sm"><p><span class="font-semibold w-20 inline-block">닉네임:</span> 코쪽이맘</p><p><span class="font-semibold w-20 inline-block">이메일:</span> coco_mom@example.com</p></div></div>
                     <div class="card"><div class="flex justify-between items-start"><h3 class="font-bold text-lg">반려동물 정보</h3><button class="btn-primary text-sm">새 반려동물 추가</button></div><div class="mt-4 border border-slate-200 p-4 rounded-lg"><div class="flex justify-between items-start"><h4 class="font-semibold">코코 (강아지)</h4><button class="text-sm font-bold text-slate-600 hover:underline">관리</button></div><p class="text-sm text-slate-500">말티즈, 5살, 중성화 완료, 3.5kg</p></div></div>
                </div>` : templates.profile;
             templates.searchResults = templates.searchResults || ((query) => `
                <div class="mb-8"><h2 class="text-3xl font-bold text-slate-800">'<span class="text-green-600">${query}</span>'에 대한 검색 결과</h2><p class="text-slate-500 mt-1">총 3개의 결과를 찾았습니다.</p></div>
                <div class="card"><ul class="divide-y divide-slate-200"><li class="py-4"><a href="#" class="hover:underline"><h3 class="font-semibold">나이 많은 강아지를 위한 <span class="bg-yellow-200">사료</span> 추천</h3><p class="text-sm text-slate-500 mt-1">커뮤니티 > 정보 공유</p></a></li><li class="py-4"><a href="#" class="hover:underline"><h3 class="font-semibold">새끼 고양이 <span class="bg-yellow-200">사료</span> 급여량 질문!</h3><p class="text-sm text-slate-500 mt-1">커뮤니티 > 질문 답변</p></a></li><li class="py-4"><a href="#" class="hover:underline"><h3 class="font-semibold">반려동물 <span class="bg-yellow-200">사료</span>의 성분 알기</h3><p class="text-sm text-slate-500 mt-1">건강 정보</p></a></li></ul></div>`);
             templates.signup = templates.signup.startsWith('<!--') ? `
                <div class="modal-overlay" data-modal-close><div class="modal-content"><h2 class="text-2xl font-bold mb-4">회원가입</h2><form class="space-y-4"><input type="email" placeholder="이메일" class="w-full p-2 border rounded" required><input type="password" placeholder="비밀번호" class="w-full p-2 border rounded" required><input type="password" placeholder="비밀번호 확인" class="w-full p-2 border rounded" required><input type="text" placeholder="닉네임" class="w-full p-2 border rounded" required><button type="submit" class="btn-primary w-full py-2">가입하기</button></form></div></div>` : templates.signup;
             templates.addMeal = templates.addMeal.startsWith('<!--') ? `
                <div class="modal-overlay" data-modal-close><div class="modal-content"><h2 class="text-2xl font-bold mb-4">식사 추가</h2><form class="space-y-4"><select class="w-full p-2 border rounded"><option>코코</option></select><input type="text" placeholder="음식 이름 (예: 사료)" class="w-full p-2 border rounded"><input type="number" placeholder="칼로리 (kcal)" class="w-full p-2 border rounded"><button type="submit" class="btn-primary w-full py-2">추가하기</button></form></div></div>` : templates.addMeal;

            mainContent.innerHTML = typeof templates[pageName] === 'function' ? templates[pageName](params) : templates[pageName] || '페이지를 찾을 수 없습니다.';
            updateActiveNav(pageName);
            window.scrollTo(0, 0);
        }

        function showModal(modalName) {
            modalContainer.innerHTML = typeof templates[modalName] === 'function' ? templates[modalName]() : templates[modalName] || '';
        }

        function hideModal() {
            modalContainer.innerHTML = '';
        }

        function updateActiveNav(pageName) {
            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.dataset.page === pageName) link.classList.add('active');
                else link.classList.remove('active');
            });
        }
        
        const loggedOutView = document.getElementById('logged-out-view');
        const loggedInView = document.getElementById('logged-in-view');
        const dropdownMenu = document.getElementById('dropdown-menu');
        
        document.getElementById('login-button').addEventListener('click', () => {
            loggedOutView.classList.add('hidden');
            loggedInView.classList.remove('hidden');
        });
        document.getElementById('logout-button').addEventListener('click', () => {
            loggedInView.classList.add('hidden');
            loggedOutView.classList.remove('hidden');
            dropdownMenu.classList.add('hidden');
        });
        document.getElementById('profile-button').addEventListener('click', () => {
            dropdownMenu.classList.toggle('hidden');
        });
        
        appContainer.addEventListener('click', (e) => {
            const target = e.target.closest('[data-page], [data-modal], [data-modal-close], #apple-cal-sync-btn');
            if (!target) return;
            e.preventDefault();

            if (target.id === 'apple-cal-sync-btn') {
                isAppleCalendarSynced = !isAppleCalendarSynced;
                renderPage('calendar');
                return;
            }

            const page = target.dataset.page;
            const modal = target.dataset.modal;
            const modalClose = target.dataset.modalClose !== undefined;

            if (page) renderPage(page);
            if (modal) showModal(modal);
            if (modalClose) hideModal();
        });
        
        document.getElementById('search-input').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const query = e.target.value.trim();
                if (query) renderPage('searchResults', query);
            }
        });
        
        document.getElementById('signup-button').addEventListener('click', (e) => {
            e.preventDefault();
            showModal('signup');
        });

        document.addEventListener('DOMContentLoaded', () => {
            renderPage('dashboard');
        });
    </script>
</body>
</html>